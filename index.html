<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ç¤¾ä¼šçƒ­ç‚¹è¯„è®ºåŒº</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f0f0f0; padding: 20px; }
    .event { background: white; padding: 15px; border-radius: 8px; margin-bottom: 30px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .event h2 { margin-top: 0; }
    .comment-box textarea { width: 100%; height: 60px; margin-top: 10px; }
    .comment-box button { margin-top: 10px; padding: 8px 16px; }
    .comments .comment { background: #eef; padding: 8px; margin-top: 8px; border-radius: 5px; }
    .like-btn { background: none; border: none; color: #333; cursor: pointer; margin-top: 5px; }
    .timestamp, .ip-info { font-size: 12px; color: #666; margin-top: 5px; }
  </style>
</head>
<body>

  <div class="event" id="event1">
    <h2>äº‹ä»¶ä¸€ï¼šæ ¡å›­éœ¸å‡Œå¼•å‘ç¤¾ä¼šå…³æ³¨</h2>
    <p>æŸä¸­å­¦å¤šåå­¦ç”Ÿé­å—æ ¡å›­æ¬ºå‡Œï¼Œå¼•èµ·ç¤¾ä¼šçƒ­è®®ã€‚</p>

    <div class="comment-box">
      <textarea placeholder="å†™ä¸‹ä½ çš„çœ‹æ³•â€¦â€¦"></textarea><br>
      <button onclick="addComment('event1')">æäº¤è¯„è®º</button>
    </div>
    <div class="comments"></div>
  </div>

  <div class="event" id="event2">
    <h2>äº‹ä»¶äºŒï¼šç½‘çº¢ç‚«å¯Œè¢«ç½šæ¬¾ç™¾ä¸‡</h2>
    <p>æŸå¹³å°çŸ¥åç½‘çº¢å› ä¸å½“ç‚«å¯Œè¡Œä¸ºè¢«ç½šï¼Œå¼•å‘ç½‘å‹è®¨è®ºã€‚</p>

    <div class="comment-box">
      <textarea placeholder="å†™ä¸‹ä½ çš„çœ‹æ³•â€¦â€¦"></textarea><br>
      <button onclick="addComment('event2')">æäº¤è¯„è®º</button>
    </div>
    <div class="comments"></div>
  </div>

  <script>
    let userIP = "";
    let userLocation = "";

    // å…ˆè·å–ç”¨æˆ· IP å’Œåœ°ç†ä½ç½®ï¼ˆç”¨ ipapi.co æä¾›çš„å…è´¹æ¥å£ï¼‰
    fetch("https://ipapi.co/json/")
      .then(res => res.json())
      .then(data => {
        userIP = data.ip || "æœªçŸ¥IP";
        userLocation = `${data.region || ''}${data.city ? ' ' + data.city : ''}` || "æœªçŸ¥åœ°åŒº";
      })
      .catch(() => {
        userIP = "è·å–å¤±è´¥";
        userLocation = "è·å–å¤±è´¥";
      });

    function addComment(eventId) {
      const eventDiv = document.getElementById(eventId);
      const textarea = eventDiv.querySelector("textarea");
      const commentsDiv = eventDiv.querySelector(".comments");

      const content = textarea.value.trim();
      if (!content) return;

      const comment = document.createElement("div");
      comment.className = "comment";

      const textDiv = document.createElement("div");
      textDiv.innerText = content;

      const timestamp = document.createElement("div");
      timestamp.className = "timestamp";
      timestamp.innerText = "å‘è¡¨äºï¼š" + getCurrentTime();

      const ipDiv = document.createElement("div");
      ipDiv.className = "ip-info";
      ipDiv.innerText = `IPï¼š${userIP}    ä½ç½®ï¼š${userLocation}`;

      const likeBtn = document.createElement("button");
      likeBtn.className = "like-btn";
      likeBtn.innerText = "ğŸ‘ 0";
      likeBtn.onclick = function () {
        let count = parseInt(likeBtn.innerText.split(" ")[1]);
        count++;
        likeBtn.innerText = `ğŸ‘ ${count}`;
      };

      comment.appendChild(textDiv);
      comment.appendChild(timestamp);
      comment.appendChild(ipDiv);
      comment.appendChild(likeBtn);
      commentsDiv.appendChild(comment);
      textarea.value = "";
    }

    function getCurrentTime() {
      const now = new Date();
      const y = now.getFullYear();
      const m = String(now.getMonth() + 1).padStart(2, '0');
      const d = String(now.getDate()).padStart(2, '0');
      const h = String(now.getHours()).padStart(2, '0');
      const min = String(now.getMinutes()).padStart(2, '0');
      return `${y}-${m}-${d} ${h}:${min}`;
    }
  </script>

</body>
</html>
